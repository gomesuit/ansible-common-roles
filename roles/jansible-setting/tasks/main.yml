---
- name: mkdir jobs directory
  file:
    path="{{JENKINS_JOBS_DIR}}/{{item}}"
    state=directory
    owner={{JENKINS_USER}}
    group={{JENKINS_USER}}
    mode=755
  with_items: '{{JENKINS_JOB_NAMES}}'

- name: set jobs config file
  copy:
    src=jobs/{{item}}/config.xml
    dest={{JENKINS_JOBS_DIR}}/{{item}}/config.xml
    owner={{JENKINS_USER}}
    group={{JENKINS_USER}}
    mode=644
  with_items: '{{JENKINS_JOB_NAMES}}'
  notify: restart jenkins

- name: mkdir jobs workspace
  file:
    path="{{JENKINS_JOBS_DIR}}/{{item}}/workspace"
    state=directory
    owner={{JENKINS_USER}}
    group={{JENKINS_USER}}
    mode=755
  with_items: '{{JENKINS_JOB_NAMES}}'
